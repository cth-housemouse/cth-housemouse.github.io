<script src="../vendor/firebase.js"></script>
<script src="../vendor/firebase-simple-login.js"></script>

<polymer-element name="facebook-login" attributes="houseType vote">

  <template>
    <style>

    .loginButton {
      display: block;
      width: 400px;
      height: 100px;
      font-family: NittyBold;
      margin: 0 auto;
      padding-top:50px;
      cursor: pointer;
    }
    .loginButton:hover {
      display: block;
      width: 410px;
      height: 102px;
      font-family: NittyBold;
      margin: 0 auto;
      padding-top:50px;
      cursor: pointer;
    }

    .text {
      text-align: center;
    }

    </style>
  	
    <img src="../images/fblogin.png" class="loginButton" name="facebook-login" on-click="{{login}}"></img>

    <template if="{{ vote }}">
        <p class="text">Succesfull</p>
    </template>

  </template>

  <script>
    Polymer('facebook-login', {
       	login: function() {
          var self = this;
          var vote = {};
          var firebaseRef = new Firebase("https://crackling-fire-9322.firebaseio.com");
          var auth = new FirebaseSimpleLogin(firebaseRef, function(error, user) {
            if (error) {
              alert(error);
            } else if (user) {
              vote.houseType = self.houseType; 
              vote.userId = user.id;
              vote.country = user.thirdPartyUserData.locale.split("_")[0];
              self.vote = vote;
            }})
          auth.login('facebook');
        }
    });
  </script>
</polymer-element>
